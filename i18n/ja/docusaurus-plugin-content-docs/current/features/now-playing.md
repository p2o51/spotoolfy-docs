---
sidebar_position: 2
---

# 再生中ページ

再生中ページは Spotoolfy のコアインターフェースで、Spotify で現在再生中の曲を表示し、歌詞、ノート、キューの3つのサブページを提供します。

## プレーヤー

### アルバムカバーエリア
- 現在再生中の曲のアルバムカバーを表示
- カバーの色に基づいてアプリテーマが動的に変化

#### カバーインタラクション

**シングルタップ**

Seekコントロールオーバーレイの表示/非表示を切り替え。カバーをタップすると、3つのボタンを含む半透明オーバーレイが表示されます：
- **-10s（左）**：10秒巻き戻し
- **情報（中央）**：AI楽曲分析ページを開く
- **+10s（右）**：10秒早送り

**長押し**

Spotifyアプリにジャンプ。カバーを長押しすると以下を試みます：
1. 現在の再生コンテキスト（アルバム/プレイリスト）をSpotifyで開く
2. コンテキストがない場合、現在のトラックをSpotifyで開く
3. 両方とも失敗した場合、Spotifyアプリを直接開く

**左右スワイプ**

前/次のトラックにスキップ

### AI楽曲分析

カバーオーバーレイの「情報」ボタンをタップすると、楽曲分析ページが開き、Gemini AIが生成した楽曲分析が表示されます。

#### 分析内容

| フィールド | 説明 |
|------------|------|
| 作成時期 | 曲が作成された時代背景 |
| 作成場所 | レコーディング/作曲の場所 |
| 作詞者 | 歌詞の作者 |
| 作曲者 | 曲の作者 |
| プロデューサー | 音楽プロデューサー |
| 楽曲解析 | AIが生成したプロの音楽レビューと背景分析（2〜4文）|

#### 特徴
- Google Search Groundingを使用して情報の正確性を確保
- 結果はローカルにキャッシュされ、重複リクエストを回避
- 再生成をサポート（右上のリフレッシュボタン）
- コンテンツはクリップボードにコピー可能

#### フォローアップ質問
ページ下部の「Ask Gemini」フローティングボタンで以下が可能：
- 曲についてフォローアップ質問
- 既存の分析コンテキストに基づいて深い議論
- 対話式インタラクション体験を提供

#### 関連サービス

| サービス | 用途 |
|----------|------|
| SongInfoService | 個別楽曲のAI分析を生成 |
| InsightsService | 聴取履歴に基づく音楽パーソナリティインサイトを生成 |

### 曲情報
- **曲タイトルをタップ**：アルバムページに移動
- **アーティスト名をタップ**：アーティストページに移動（複数アーティストの場合は選択ページが先に表示）

### 再生コントロール
- 前 / 再生・一時停止 / 次
- 再生モード切り替え（順次、シャッフル、1曲リピート）
- プログレスバー：AppBar下に表示、タップでシーク

### ミニプレーヤー
小さい画面では、歌詞/ノート/キュータブの下半分に切り替えると、プレーヤーは自動的にミニモードに切り替わります：
- 簡略化された曲情報を表示
- タップでフルプレーヤーを展開

## 歌詞

歌詞タブは現在再生中の曲のリアルタイム歌詞を表示します。

### 歌詞ソース
Spotoolfy は複数のソースから歌詞を取得し、優先順位は：
1. **NetEase Cloud Music** - 中国語の曲に最適
2. **QQ Music** - フォールバックソース
3. **LRCLIB** - 英語の曲のフォールバック

### 歌詞表示
- 歌詞が行ごとにハイライトされ、再生進行に合わせて自動スクロール
- **任意の歌詞行をタップ**：その位置にジャンプして再生
- 現在の行がハイライト、他の行は半透明

### 自動スクロール
- デフォルトで自動スクロールが有効
- **歌詞をドラッグ**：自動スクロールを一時停止
- **自動スクロールボタンをタップ**（下部）：自動スクロールを再開

### 翻訳機能
翻訳ボタンをタップして翻訳ページに入る：

#### 翻訳スタイル
- **Faithful（忠実）**：原文の意味を正確に伝える
- **Melodramatic Poet（詩的）**：より詩的で感情的
- **Machine Classic（機械）**：初期の機械翻訳スタイルをシミュレート
- **NetEase（網易雲）**：NetEaseネイティブ翻訳を使用（利用可能な場合）

#### 翻訳操作
- **スタイル切り替え**：翻訳スタイルを再選択
- **再翻訳**：翻訳結果を強制リフレッシュ
- **コピー**：翻訳された歌詞をコピー
- **原文を表示**：原文/翻訳を切り替え

### 歌詞コピーモード
「歌詞コピーモード」ボタンをタップ：
- 歌詞の自動スクロールが停止
- 再生モードが自動的に1曲リピートに切り替え
- 歌詞の書き写しや学習に便利
- モードを閉じるか自動スクロールボタンをタップすると前の再生モードに復元

### 歌詞検索
自動マッチした歌詞が正しくない場合、検索ボタンをタップして手動検索：
- 曲名とアーティスト名を入力
- 検索結果から正しい歌詞を選択
- 選択はローカルにキャッシュ

## ノート（レコード）

ノートタブは現在の曲のステータス情報と履歴ノートを表示します。

### ステータスパネル
現在の曲の統計を表示：
- **初回記録時間**：この曲に最初のノートを追加した時間
- **最終聴取**：Spotifyが記録した最近の再生時間
- **評価変化**：前回と比較した評価の変化（↑上昇 / →同じ / ↓下降）
- **現在の評価**：最新の評価

### ノートリスト
この曲のすべてのノートを時間の逆順で表示：
- **ノート内容**：テキスト記録
- **評価アイコン**：👎 / 😐 / 🔥
- **時間マーカー**：
  - 「初」：最初のノート
  - 「今日」「昨日」：今日/昨日のノート
  - その他は相対時間または特定の日付を表示
- **歌詞スナップショット**：記録時の歌詞位置（ある場合）

### ノート操作
**ノートを長押し**してアクションメニューを開く：
- **再生**：ノートに記録された歌詞タイムスタンプ位置から再生
- **編集**：ノート内容と評価を変更
- **共有**：ノートポスターを生成
- **削除**：このノートを削除

### 関連ノート
同じ名前だが異なるTrackIDの曲のノート（例：通常版とデラックス版アルバムの同じ曲）がある場合、「関連ノート」セクションに表示されます。

## キュー

キュータブは再生キューの次の曲を表示します。

### キュー表示
- 次に再生される曲を表示
- 曲名、アーティスト名、アルバムカバーを含む

### キュー操作
- **曲をタップ**：その曲を即座に再生
- **曲を長押し**：Spotifyクライアントで開く

## フローティングアクションボタン（FAB）

右下のフローティングボタンは新しいノートを追加するためのものです。

### ノート追加
FABをタップしてノート追加パネルを開く：

1. **ノート内容を入力**（オプション）：この曲についての感想を書く
2. **評価を選択**：
   - 👎 嫌い（0点）
   - 😐 普通（3点）
   - 🔥 好き（5点）
3. **自動記録**：
   - 現在の再生タイムスタンプ
   - 現在の歌詞位置（歌詞スナップショット）
   - 再生コンテキスト（アルバム/プレイリスト）

### クイック評価
ノート内容を入力しない場合、ノートは自動的に「評価」タイプとしてマークされ、曲の評価をすばやく記録するのに適しています。

## 大画面対応

タブレットや大画面デバイスでは、再生中ページはサイドバイサイドレイアウトを使用：
- **左側**：プレーヤー（アルバムカバーとコントロール）
- **右側**：タブコンテンツ（歌詞/ノート/キュー）

このレイアウトにより、アルバムカバーと歌詞コンテンツを同時に見ることができます。
