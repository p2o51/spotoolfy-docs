# 正在播放页面

正在播放页面是 Spotoolfy 的核心界面，显示当前 Spotify 正在播放的歌曲信息，并提供歌词、笔记和队列三个子页面。

## 播放器

### 专辑封面区域
- 显示当前播放歌曲的专辑封面
- 应用主题会根据封面颜色动态变化
- **左右滑动**：切换上一首/下一首
- **点击封面**：调整播放进度
- **长按封面**：跳转到当前播放的上下文（专辑/播放列表）

### 歌曲信息
- **点击歌曲标题**：跳转到专辑页面
- **点击歌手名**：跳转到歌手页面（多歌手时先打开选择页面）

### 播放控制
- 上一首 / 暂停・播放 / 下一首
- 播放模式切换（顺序播放、随机播放、单曲循环）
- 进度条：顶部 AppBar 下方显示，点击可跳转

### 迷你播放器
在小屏设备上，当切换到歌词/笔记/队列标签页的下半部分时，播放器会自动切换为迷你模式：
- 显示简化的歌曲信息
- 点击展开完整播放器

## 歌词 (Lyrics)

歌词标签页显示当前播放歌曲的实时歌词。

### 歌词来源
Spotoolfy 从多个来源获取歌词，按优先级排序：
1. **网易云音乐** - 中文歌曲首选
2. **QQ音乐** - 备选来源
3. **LRCLIB** - 英文歌曲备选

### 歌词显示
- 歌词逐行高亮，自动滚动跟随播放进度
- **点击任意歌词行**：跳转到对应位置播放
- 当前行高亮显示，其他行半透明

### 自动滚动
- 默认开启自动滚动
- **拖动歌词**：暂停自动滚动
- **点击自动滚动按钮**（底部）：恢复自动滚动

### 翻译功能
点击翻译按钮进入翻译页面：

#### 翻译风格
- **Faithful（忠实）**：准确传达原意
- **Melodramatic Poet（诗意）**：更富诗意和情感
- **Machine Classic（机器）**：模拟早期机翻风格
- **NetEase（网易云）**：使用网易云原生翻译（如果可用）

#### 翻译操作
- **切换风格**：重新选择翻译风格
- **重新翻译**：强制刷新翻译结果
- **复制**：复制翻译后的歌词
- **显示原文**：切换显示原文/翻译

### 抄歌词模式
点击「抄歌词模式」按钮：
- 歌词停止自动滚动
- 播放模式自动切换为单曲循环
- 方便抄写或学习歌词
- 关闭模式或点击自动滚动按钮后恢复原来的播放模式

### 搜索歌词
如果自动匹配的歌词不正确，点击搜索按钮手动搜索：
- 输入歌曲名和歌手名
- 从搜索结果中选择正确的歌词
- 选择后会缓存到本地

## 笔记 (Records)

笔记标签页显示当前歌曲的状态信息和历史笔记。

### 状态面板
显示当前歌曲的统计信息：
- **初次记录时间**：第一次为这首歌添加笔记的时间
- **上次聆听**：Spotify 记录的最近播放时间
- **评分变动**：显示评分相比上次的变化（↑升高 / →不变 / ↓降低）
- **当前评分**：最新的评分

### 笔记列表
按时间倒序显示这首歌的所有笔记：
- **笔记内容**：你的文字记录
- **评分图标**：👎 / 😐 / 🔥
- **时间标记**：
  - 「初」：第一条笔记
  - 「今」「昨」：今天/昨天的笔记
  - 其他显示相对时间或具体日期
- **歌词快照**：记录时的歌词位置（如果有）

### 笔记操作
**长按笔记**打开操作菜单：
- **播放**：从笔记记录的歌词时间戳位置播放
- **编辑**：修改笔记内容和评分
- **分享**：生成笔记海报
- **删除**：删除这条笔记

### 相关笔记
如果存在同名但 TrackID 不同的歌曲笔记（例如普通版和豪华版专辑中的同一首歌），会显示在「相关笔记」区域。

## 队列 (Queue)

队列标签页显示即将播放的歌曲列表。

### 队列显示
- 显示接下来将播放的歌曲
- 包含歌曲名、歌手名、专辑封面

### 队列操作
- **点击歌曲**：立即播放该歌曲
- **长按歌曲**：打开 Spotify 客户端查看

## 浮动操作按钮 (FAB)

页面右下角的浮动按钮用于添加新笔记。

### 添加笔记
点击 FAB 打开添加笔记面板：

1. **输入笔记内容**（可选）：写下你对这首歌的感想
2. **选择评分**：
   - 👎 不喜欢 (0分)
   - 😐 一般 (3分)
   - 🔥 喜欢 (5分)
3. **自动记录**：
   - 当前播放时间戳
   - 当前歌词位置（歌词快照）
   - 播放上下文（专辑/播放列表）

### 快速评分
如果不输入笔记内容，笔记会自动标记为「评分」类型，适合快速记录对歌曲的评价。

## 大屏适配

在平板或大屏设备上，正在播放页面采用左右分栏布局：
- **左侧**：播放器（专辑封面和控制）
- **右侧**：标签页内容（歌词/笔记/队列）

这种布局让你可以同时看到专辑封面和歌词内容。
